<!DOCTYPE html>
<html>
<head>
<title>sfxr.js</title>

<meta charset="utf-8" >

<script src="riffwave.js"></script>
<script src="sfxr.js"></script>
<link type="text/css" href="jquery-ui/css/ui-darkness/jquery-ui-1.8.16.custom.css" rel="Stylesheet" />
<script type="text/javascript" src="jquery-ui/js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="jquery-ui/js/jquery-ui-1.8.16.custom.min.js"></script>

<script>

var PARAMS;

function gen(fx) {
  PARAMS = new Params();
  PARAMS[fx]();
  play();
}

function mut() {
  PARAMS.mutate();
  play();
}

function play() {
  var sound = generate(PARAMS);
  var audio = new Audio();
  audio.src = sound.dataURI;
  audio.play();
}

$(function() {
  $("#radio").buttonset();
  $("button").button();
  $(".slider").slider({
    value: 10000,
    min: 0,
    max: 10000,
    slide: function(event, ui) {
      $("#amount").text( "$" + ui.value );
    }
  });
  $(".slider").filter(".signed").
    slider("option", "min", -10000).
    slider("value", 0);

  PARAMS = new Params();
  PARAMS.pickupCoin();
  play();

});
</script>

<style>

button {
  width: 10em;
}

div, h1 {
  display: inline-block;
}

h1 {
  padding-right: 1em;
  padding-top: 0;
  margin-top: 0;
}

body {
  padding-left: 2em;
}

.slider {
  width: 120px;
}

  * {
    font: 10pt Helvetica;
  }

h1 { font-size: 24pt; }
h2 { font-size: 12pt; }

button, input, label {
  font-size: 10px;
}

div {
  vertical-align: top;
}

th {
  padding-left: 1em;
  text-align: left;
}

hr {
  font-size: 3px;
}

</style>
</head>

<body>

<h1>sfxr</h1>


<div>
  <h2>Generator</h2>
  <button onclick="gen('pickupCoin')">Pickup/coin</button> <br/>
  <button onclick="gen('laserShoot')">Laser/shoot</button> <br/>
  <button onclick="gen('explosion')">Explosion</button> <br/>
  <button onclick="gen('powerUp')">Powerup</button> <br/>
  <button onclick="gen('hitHurt')">Hit/hurt</button> <br/>
  <button onclick="gen('jump')">Jump</button> <br/>
  <button onclick="gen('blipSelect')">Blip/select</button> <br/>
  <button onclick="gen('random')">Random</button> <br/>
  <br/>
  <br/>
  <br/>
  <button onclick="mut()">Mutate</button> <br/>
</div>

<div class="demo">
<h2>Manual Settings</h2>
<form>
  <div id="radio">
    <input type="radio" id="square" name="radio" />
      <label for="square">Square</label>
    <input type="radio" id="sawtooth" name="radio" checked="checked" />
      <label for="sawtooth">Sawtooth</label>
    <input type="radio" id="sine" name="radio" />
      <label for="sine">Sine</label>
    <input type="radio" id="noise" name="radio" />
      <label for="noise">Noise</label>
  </div>
</form>

<br/>

<table>
  <tr><td><div class="slider" id="env_attack"></div> <th>Attack time
  <tr><td><div class="slider" id="env_sustain"></div> <th>Sustain time
  <tr><td><div class="slider" id="env_punch"></div> <th>Sustain punch
  <tr><td><div class="slider" id="env_decay"></div> <th>Decay time
  <tr><td><th><hr>
  <tr><td><div class="slider" id="base_freq"></div> <th>Start frequency
  <tr><td><div class="slider" id="freq_limit"></div> <th>Min frequency cutoff
  <tr><td><div class="signed slider" id="freq_ramp"></div> <th>Slide
  <tr><td><div class="signed slider" id="freq_dramp"></div> <th>Delta slide
  <tr><td><div class="slider" id="vib_strength"></div> <th>Vibrato depth
  <tr><td><div class="slider" id="vib_speed"></div> <th>Vibrato speed
  <tr><td><th><hr>                               
  <tr><td><div class="signed slider" id="arp_mod"></div> <th>Change amount
  <tr><td><div class="slider" id="arp_speed"></div> <th>Change speed
  <tr><td><th><hr>                               
  <tr><td><div class="slider" id="duty"></div> <th>Square duty
  <tr><td><div class="signed slider" id="duty_ramp"></div> <th>Duty sweep
  <tr><td><th><hr>                               
  <tr><td><div class="slider" id="repeat_speed"></div> <th>Repeat speed
  <tr><td><th><hr>                               
  <tr><td><div class="signed slider" id="pha_offset"></div> <th>Phaser offset
  <tr><td><div class="signed slider" id="pha_ramp"></div> <th>Phaser sweep
  <tr><td><th><hr>                               
  <tr><td><div class="slider" id="lpf_freq"></div> <th>Low-pass filter cutoff
  <tr><td><div class="signed slider" id="lpf_ramp"></div> <th>Low-pass filter cutoff sweep
  <tr><td><div class="slider" id="lpf_resonance"></div> <th>Low-pass filter resonance
  <tr><td><div class="slider" id="hpf_freq"></div> <th>High-pass filter cutoff
  <tr><td><div class="signed slider" id="hpf_ramp"></div> <th>High-pass filter cutoff sweep
</table>

<div id="amount">Slider</div>

</div>

<div>
  <h2>Sound</h2>
  <button onclick="play()">Play</button> <br/>
</div>

</div>

<style>
#demo-frame > div.demo { padding: 10px !important; };
</style>

</script>
